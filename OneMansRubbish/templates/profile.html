{% extends 'base.html' %}
{% block content %}
<h2>Profile</h2>

<table>
    <caption>
        <h2>Your Details</h2>
    </caption>
    <tbody>
    <tr>
        <th scope="col">P</th>
        <th scope="col"></th>
    </tr>
{% for user in users %}
    

        <tr>
        <td>Username:</td>
        <td>{{ user.user_name }}</td>
    </tr>
    <tr>
        <td>Full Name:</td>
        <td>{{ user.full_name }}</td>
    </tr>
    <tr>
        <td>Phone:</td>
        <td>{{ user.phone }}</td>
    </tr>
    <tr>
        <td>Address Line 1:</td>
        <td>{{ user.address_line1 }}</td>
    </tr>
    <tr>
        <td>Address Line 2:</td>
        <td>{{ user.address_line2 }}</td>
    </tr>
    <tr>
        <td>City:</td>
        <td>{{ user.city }}</td>
    </tr>
    <tr>
        <td>Country:</td>
        <td>{{ user.country }}</td>
    </tr>
{% endfor %}

    </tbody>
</table>

<table>
    <caption>
        <h2>Your Posts</h2>
    </caption>
    <tbody>
    <tr>
        <th scope="col">Post Name</th>
        <th scope="col">Status</th>
        <th scope="col">Qty Remaining</th>
        <th scope="col">Claimed By</th>
        <th scope="col"></th>
    </tr>
{% for posts in posted %}

    <tr>
        <td>{{ posts.post_title }}</td>
        <td>{{ posts.post_status }}</td>
        <td>{{ posts.post_quantity }}</td>
        <td>
            {% for claim in claimed %}
                {% if claim.claim_post_id == posts.post_id %}
                    <a class="page-link" href="/directMessage/{{ claim.claim_user_id }}">{{ claim.claimed_by.user_name }}</a><br>
                {% endif %}
            {% endfor %}
        </td>
        <td>Edit Post</td>
    </tr>
{% endfor %}


    </tbody>
</table>


<table>
    <caption>
        <h2>Items you've claimed</h2>
    </caption>
    <tbody>
    <tr>
        <th scope="col">Post Name</th>
        <th scope="col">Posted by</th>
    </tr>

{% for claim in claimed %}
    {% if claim.claim_user_id == current_user.id %}

    <tr>
        <td>{{ claim.claimed_post.post_title }}</td>
        <td>{{ claim.claimed_post.posted_by.user_name }}</td>
    </tr>
    {% endif %}
{% endfor %}


    </tbody>
</table>

{% endblock %}